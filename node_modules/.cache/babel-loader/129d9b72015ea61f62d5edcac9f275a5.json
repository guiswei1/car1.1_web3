{"ast":null,"code":"var _jsxFileName = \"/Users/lcst/car1.1/car1.1-web3/src/App.js\";\nimport React, { Component } from 'react';\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.StakingSetApprovalForAll = () => {\n      window.nMyContract.methods.setApprovalForAll(window.tAddress, true).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.Stake = () => {\n      //质押策略id\n      var strategyId = \"0x30120cc9d265f9a5dc395a40de2e0e246a94f9ab9841b89fcdb28e978c6fdb52\";\n      window.tMyContract.methods.stake(strategyId).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.MarketSetApprovalForAll = () => {\n      window.nMyContract.methods.setApprovalForAll(window.aAddress, true).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.SellItem = () => {\n      var __nftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n      var tokenid = 4;\n\n      var _price = 1000 * Math.pow(10, -18);\n\n      window.aMyContract.methods.sellItem(__nftAddress, tokenid, _price).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.Revoke = () => {\n      var _aid = 0;\n      window.aMyContract.methods.revoke(_aid).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.Purchase = () => {\n      var _aid = 0;\n      window.aMyContract.methods.purchase(_aid).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.CarGameSetApprovalForAll = () => {\n      window.nMyContract.methods.setApprovalForAll(window.cgAddress, true).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.EnterGame = () => {\n      var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n      var carid = 1;\n      window.nMyContract.methods.enterGame(carNftAddress, carid).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.ExitGame = () => {\n      var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n      var carid = 1;\n      window.nMyContract.methods.exitGame(carNftAddress, carid).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.Repair = () => {\n      var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n      var carid = 1;\n      window.nMyContract.methods.repair(carNftAddress, carid).send({\n        from: window.defaultAccount\n      }).on('transactionHash', transactionHash => {\n        console.log('transactionHash', transactionHash);\n      }).on('confirmation', (confirmationNumber, receipt) => {\n        console.log({\n          confirmationNumber: confirmationNumber,\n          receipt: receipt\n        });\n      });\n    };\n\n    this.state = {\n      value: 0\n    };\n  } //链接钱包\n\n\n  async componentDidMount() {\n    //判断页面是否安装Metamask\n    if (typeof window.ethereum !== 'undefined') {\n      const ethereum = window.ethereum; //禁止自动刷新，metamask要求写的\n\n      ethereum.autoRefreshOnNetworkChange = false;\n\n      try {\n        //第一次链接Metamask\n        const accounts = await ethereum.enable();\n        console.log(accounts); //初始化Provider\n\n        const provider = window['ethereum'];\n        console.log(provider); //获取网络ID\n\n        console.log(provider.chainId); //实例化Web3\n\n        const web3 = new Web3(provider);\n        console.log(web3); // ---------------------定义n车型--------------------\n        //导入abi文件\n\n        const nAbi = require(\"./abi/NTierCar.json\"); //合约地址\n\n\n        const nAddress = \"0xc29270cf76D77f1840e7ED67B9C4EB68aC815e14\"; //实例化合约\n\n        window.nMyContract = new web3.eth.Contract(nAbi.abi, nAddress);\n        console.log(\"nMyContract\" + window.nMyContract); //--------------------------END -----------------------\n        //------------------------定义质押---------------------\n        //导入abi文件\n\n        const tAbi = require(\"./abi/Staking.json\"); //合约地址\n\n\n        window.tAddress = \"0x7FC006357fc0EC1602f13d2FADe179b11f5C8056\"; //实例化合约\n\n        window.tMyContract = new web3.eth.Contract(tAbi.abi, window.tAddress);\n        console.log(\"tMyContract\" + window.tMyContract); //--------------------------END -----------------------\n\n        debugger; // --------------------------拍卖-----------------------------\n        //导入abi文件\n\n        const aAbi = require(\"./abi/AuctionMarket.json\"); //合约地址\n\n\n        window.aAddress = \"0xEf8d9cA370CE7262cC4EC70b2B0578EcBB4B8a4F\"; //实例化合约\n\n        window.aMyContract = new web3.eth.Contract(aAbi.abi, window.aAddress);\n        console.log(\"aMyContract\" + window.aMyContract); // ------------------------end--------------------------------------\n        //---------------------------游戏-----------------------------------\n        //导入abi文件\n\n        const cgAbi = require(\"./abi/CarCarGameLogic.json\"); //定义N车型合约地址\n\n\n        window.cgAddress = \"0x07c634DE31ef43546b418Cdc42007bbBDbff3F81\"; //实例化合约\n\n        window.cgMyContract = new web3.eth.Contract(cgAbi.abi, window.cgAddress);\n        console.log(\"cgMyContract\" + window.aMyContract); //---------------------------------------------------\n\n        window.defaultAccount = accounts[0].toLowerCase();\n        console.log(window.defaultAccount);\n        ethereum.on('accountsChanged', function (accounts) {\n          console.log(\"accountsChanged:\" + accounts);\n        });\n        ethereum.on('networkChanged', function (networkVersion) {\n          console.log(\"networkChanged:\" + networkVersion);\n        });\n      } catch (e) {}\n    } else {\n      console.log('没有metamask');\n    } // 请求待释放数据\n\n  } // ------------------------1、质押--------------------------------------------------------\n  //授权\n\n\n  //--------------------------end--------------------------------------------------\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.StakingSetApprovalForAll();\n          },\n          children: \"\\u8D28\\u62BC\\u6388\\u6743\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.Stake();\n          },\n          children: \"\\u8D28\\u62BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"----------------------------------------------------------\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.MarketSetApprovalForAll();\n          },\n          children: \"\\u6388\\u6743\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.Revoke();\n          },\n          children: \"\\u4E0A\\u67B6\\u62CD\\u5356\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.Purchase();\n          },\n          children: \"\\u8D2D\\u4E70\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.Revoke();\n          },\n          children: \"\\u64A4\\u9500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"----------------------------------------------------------\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.CarGameSetApprovalForAll();\n          },\n          children: \"\\u6E38\\u620F\\u6388\\u6743\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.EnterGame();\n          },\n          children: \"\\u8FDB\\u5165\\u6E38\\u620F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.ExitGame();\n          },\n          children: \"\\u9000\\u51FA\\u6E38\\u620F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.Repair();\n          },\n          children: \"\\u4FEE\\u7406\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/lcst/car1.1/car1.1-web3/src/App.js"],"names":["React","Component","Web3","App","constructor","props","StakingSetApprovalForAll","window","nMyContract","methods","setApprovalForAll","tAddress","send","from","defaultAccount","on","transactionHash","console","log","confirmationNumber","receipt","Stake","strategyId","tMyContract","stake","MarketSetApprovalForAll","aAddress","SellItem","__nftAddress","tokenid","_price","Math","pow","aMyContract","sellItem","Revoke","_aid","revoke","Purchase","purchase","CarGameSetApprovalForAll","cgAddress","EnterGame","carNftAddress","carid","enterGame","ExitGame","exitGame","Repair","repair","state","value","componentDidMount","ethereum","autoRefreshOnNetworkChange","accounts","enable","provider","chainId","web3","nAbi","require","nAddress","eth","Contract","abi","tAbi","aAbi","cgAbi","cgMyContract","toLowerCase","networkVersion","e","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from \"web3\";\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value:0\n    };\n  }\n\n  //链接钱包\n  async componentDidMount() {\n\n    //判断页面是否安装Metamask\n    if (typeof window.ethereum !== 'undefined') {\n      const ethereum = window.ethereum\n      //禁止自动刷新，metamask要求写的\n      ethereum.autoRefreshOnNetworkChange = false\n\n      try {\n        //第一次链接Metamask\n        const accounts = await ethereum.enable()\n        console.log(accounts)\n        //初始化Provider\n        const provider = window['ethereum']\n        console.log(provider)\n        //获取网络ID\n        console.log(provider.chainId)\n        //实例化Web3\n        const web3 = new Web3(provider)     \n        console.log(web3)\n        // ---------------------定义n车型--------------------\n        //导入abi文件\n        const nAbi = require(\"./abi/NTierCar.json\")\n        //合约地址\n        const nAddress = \"0xc29270cf76D77f1840e7ED67B9C4EB68aC815e14\"\n        //实例化合约\n        window.nMyContract = new web3.eth.Contract(nAbi.abi,nAddress)\n        console.log(\"nMyContract\"+window.nMyContract)\n        //--------------------------END -----------------------\n\n        //------------------------定义质押---------------------\n        //导入abi文件\n        const tAbi = require(\"./abi/Staking.json\")\n        //合约地址\n        window.tAddress = \"0x7FC006357fc0EC1602f13d2FADe179b11f5C8056\"\n        //实例化合约\n        window.tMyContract = new web3.eth.Contract(tAbi.abi,window.tAddress)\n        console.log(\"tMyContract\"+window.tMyContract)\n        //--------------------------END -----------------------\n         \n        debugger;\n        // --------------------------拍卖-----------------------------\n        //导入abi文件\n        const aAbi = require(\"./abi/AuctionMarket.json\")\n        //合约地址\n        window.aAddress = \"0xEf8d9cA370CE7262cC4EC70b2B0578EcBB4B8a4F\"\n        //实例化合约\n        window.aMyContract = new web3.eth.Contract(aAbi.abi,  window.aAddress )\n        console.log(\"aMyContract\"+window.aMyContract)\n       // ------------------------end--------------------------------------\n\n       //---------------------------游戏-----------------------------------\n        //导入abi文件\n        const cgAbi = require(\"./abi/CarCarGameLogic.json\")\n        //定义N车型合约地址\n        window.cgAddress = \"0x07c634DE31ef43546b418Cdc42007bbBDbff3F81\"\n        //实例化合约\n        window.cgMyContract = new web3.eth.Contract(cgAbi.abi,  window.cgAddress )\n        console.log(\"cgMyContract\"+window.aMyContract)\n       //---------------------------------------------------\n\n\n        window.defaultAccount = accounts[0].toLowerCase()\n        console.log(window.defaultAccount)\n\n        ethereum.on('accountsChanged', function (accounts) {\n          console.log(\"accountsChanged:\" + accounts)\n        })\n        ethereum.on('networkChanged', function (networkVersion) {\n          console.log(\"networkChanged:\" + networkVersion)\n        })\n      } catch (e) {\n\n      }\n    } else {\n      console.log('没有metamask')\n    }\n    // 请求待释放数据\n\n\n  }\n\n  // ------------------------1、质押--------------------------------------------------------\n  //授权\n  StakingSetApprovalForAll =() =>{\n    window.nMyContract.methods.setApprovalForAll(window.tAddress,true).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n    console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n    console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n\n//质押\nStake =() =>{\n  //质押策略id\n  var strategyId = \"0x30120cc9d265f9a5dc395a40de2e0e246a94f9ab9841b89fcdb28e978c6fdb52\";\n  window.tMyContract.methods.stake(strategyId).send({from:window.defaultAccount})\n.on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n})\n.on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n})\n \n}\n\n //------------------------------end----------------------------------------\n\n//--------------------------------2、拍卖----------------------------------------\n  //授权\n  MarketSetApprovalForAll =() =>{\n    window.nMyContract.methods.setApprovalForAll(window.aAddress,true).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n    console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n    console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n//上架要拍卖的物品\nSellItem =() =>{\n    var __nftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n    var tokenid =4;\n    var _price = 1000 * Math.pow(10,-18);\n    window.aMyContract.methods.sellItem(__nftAddress,tokenid,_price).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n    console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n    console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n\n//撤销拍卖\nRevoke =() =>{\n  var _aid = 0;\n  window.aMyContract.methods.revoke(_aid).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n//购买物品\nPurchase =() =>{\n  var _aid = 0;\n  window.aMyContract.methods.purchase(_aid).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n//--------------------------------end------------------------------------------\n\n//--------------------------------3游戏中物品奖励----------------------------------\n\n\n//------------------------------end-----------------------------------------------\n\n//--------------------------4游戏过程---------------------------------------------\n  //授权\n  CarGameSetApprovalForAll =() =>{\n    window.nMyContract.methods.setApprovalForAll(window.cgAddress,true).send({from:window.defaultAccount})\n  .on('transactionHash',(transactionHash)=>{\n    console.log('transactionHash',transactionHash)\n  })\n  .on('confirmation',(confirmationNumber,receipt)=>{\n    console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n  })\n}\n\n//进入游戏\nEnterGame =() =>{\n  var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n  var carid = 1;\n  window.nMyContract.methods.enterGame(carNftAddress,carid).send({from:window.defaultAccount})\n.on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n})\n.on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n})\n}\n\n//退出游戏\nExitGame =() =>{\n  var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n  var carid = 1;\n  window.nMyContract.methods.exitGame(carNftAddress,carid).send({from:window.defaultAccount})\n.on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n})\n.on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n})\n}\n//修理车\nRepair =() =>{\n  var carNftAddress = \"0x79f1F1aBd8eB5b80110cfe4ccBF266958bb301f9\";\n  var carid = 1;\n  window.nMyContract.methods.repair(carNftAddress,carid).send({from:window.defaultAccount})\n.on('transactionHash',(transactionHash)=>{\n  console.log('transactionHash',transactionHash)\n})\n.on('confirmation',(confirmationNumber,receipt)=>{\n  console.log({ confirmationNumber: confirmationNumber, receipt: receipt });\n})\n}\n\n//--------------------------end--------------------------------------------------\n\nrender() {\n  \n  return (\n    <div>\n      <div> <button onClick={() => { this.StakingSetApprovalForAll() }}>质押授权</button></div>\n      <div> <button onClick={() => { this.Stake() }}>质押</button></div>\n      <div><span>----------------------------------------------------------</span></div>\n      <div> <button onClick={() => { this.MarketSetApprovalForAll() }}>授权</button></div>\n      <div> <button onClick={() => { this.Revoke() }}>上架拍卖</button></div>\n      <div> <button onClick={() => { this.Purchase() }}>购买</button></div>\n      <div> <button onClick={() => { this.Revoke() }}>撤销</button></div>\n      <div><span>----------------------------------------------------------</span></div>\n      <div> <button onClick={() => { this.CarGameSetApprovalForAll() }}>游戏授权</button></div>\n      <div> <button onClick={() => { this.EnterGame() }}>进入游戏</button></div>\n      <div> <button onClick={() => { this.ExitGame() }}>退出游戏</button></div>\n      <div> <button onClick={() => { this.Repair() }}>修理</button></div>\n    </div>\n  );\n}\n}export default App;"]},"metadata":{},"sourceType":"module"}